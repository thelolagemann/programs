'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _os=require('os'),_os2=_interopRequireDefault(_os),_child_process=require('child_process'),_textEncoding=require('text-encoding'),_textEncoding2=_interopRequireDefault(_textEncoding);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var decoder=new _textEncoding2.default.TextDecoder('utf-8'),COMMANDS={linux:'dpkg -l'},ERRORS={UNSUPPORTED_PLATFORM:'The '+_os2.default.platform()+' platform isn\'t currently supported'},PROGRAMS=platformSupported()?uintToStr((0,_child_process.execSync)(''+COMMANDS[_os2.default.platform()])).split('\n').map(function(a){return splitProgram(a)}).filter(function(a){return a.name!==void 0}):[];function splitAt(a,b,c){return a.split(b).slice(c).join(' ')}function uintToStr(a){return decoder.decode(a)}function platformSupported(){return COMMANDS.hasOwnProperty(_os2.default.platform())}function splitProgram(a){switch(_os2.default.platform()){case'linux':var b=a.split(/\s+/);return{desc:splitAt(a,/\s+/,4),platform:b[3],name:b[1],version:b[2]};case'win32':break;default:}}function getPrograms(a){if(!platformSupported())return ERRORS.UNSUPPORTED_PLATFORM;return Array.isArray(a)?PROGRAMS.filter(function(b){return 0<a.some(function(a){return a==b.name})}):'string'==typeof a?PROGRAMS.find(function(b){return b.name===a}):null==a?PROGRAMS:void 0}function hasPrograms(a){if(!platformSupported())return ERRORS.UNSUPPORTED_PLATFORM;return Array.isArray(a)?a.every(function(a){return PROGRAMS.some(function(b){return b.name===a})}):!('string'!=typeof a)&&PROGRAMS.some(function(b){return b.name===a})}exports.default={getPrograms:getPrograms,hasPrograms:hasPrograms},module.exports=exports['default'];
